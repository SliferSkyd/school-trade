{% extends "base.html" %}
{% load static %}

{% block content %}
<h2>Bài đăng</h2>

<!-- Bộ lọc -->
<div class="filters">
    <label for="category">Danh mục:</label>
    <select id="category">
        <option>Quần áo</option>
        <option>Phụ kiện</option>
        <option>Sách vở</option>
        <option>Đồ dùng học tập</option>
        <option>Đồ điện tử</option>
        <option>Sản phẩm khác</option>
    </select>

    <label for="postType">Bài đăng:</label>
    <select id="postType">
        <option>Bài đăng thanh lý</option>
        <option>Bài đăng trao đổi</option>
    </select>
</div>

<!-- Danh sách bài đăng -->
    <h1>Danh sách {{ approved_posts|length }} bài đăng:</h1>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4 mt-3">
        {% for post in approved_posts %}
        <div class="col">
            <div class="post-card">
                <!-- Ảnh sản phẩm với modal -->
                <a href="#" data-bs-toggle="modal" data-bs-target="#imageModal"
                   onclick="openImageModal('{% static '.images/' %}{{ post.product_image }}')">
                    <img src="{% static 'images/' %}{{ post.product_image }}" alt="Ảnh sản phẩm" class="img-fluid">
                </a>
                <div class="product-details">
                    <h5>{{ post.title }}</h5>
                    <p><strong>Người đăng:</strong> {{ post.id_user.full_name }}</p>
                    <p><strong>Ngày đăng:</strong> {{ post.date_created|date:"d/m/Y H:i" }}</p>
                    <p><strong>Danh mục:</strong> {{ post.id_category.name }}</p>
                    <p><strong>Tên sản phẩm:</strong> {{ post.product_name }}</p>
                    <p><strong>Tình trạng sử dụng:</strong> {{ post.product_used_period }}</p>
                    <p><strong>Giá:</strong> {{ post.price|floatformat:0 }} VND</p>
                    <p><strong>Loại bài:</strong> {{ post.type_post }}</p>
                    <p><strong>Nội dung:</strong> {{ post.content }}</p>
                    <p><strong>Trạng thái:</strong> <span class="badge bg-warning text-dark">Đã duyệt</span></p>
                </div>
            </div>
        </div>
        {% empty %}
        <p>Không có bài đăng nào đã được duyệt.</p>
        {% endfor %}
<!-- Modal ảnh sản phẩm
<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <img src="" id="modal-image" class="img-fluid" alt="Ảnh sản phẩm">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div> -->

{% endblock %}

{% block script %}
<script>
    // Hàm mở modal ảnh sản phẩm
    function openImageModal(imageUrl) {
        document.getElementById('modal-image').src = imageUrl;
    }
</script>
{% endblock %}
